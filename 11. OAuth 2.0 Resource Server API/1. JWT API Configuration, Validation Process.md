-----
### 설정 클래스 생성
-----
<div align="center">
<img src="https://github.com/user-attachments/assets/a678fac7-4bd1-4937-9a16-2297d13b51e1">
</div>

1. API 설정
   - SecurityFilterChain 타입의 빈을 생성해서 보안 필터 구성
   - HttpSecurity에 있는 oauth2ResourceServer().jwt() API를 정의하고 빌드

-----
### OAuth2ResourceServerConfiguration / JwtConfigurer
-----
<div align="center">
<img src="https://github.com/user-attachments/assets/2f2f8368-3e4c-4ad4-82c2-dccc00e00b88">
</div>

-----
### 검증 프로세스 이해
-----
<div align="center">
<img src="https://github.com/user-attachments/assets/cffedd76-66db-4b81-b2de-91007695ea52">
</div>

1. 프로퍼티를 설정하면 JWT로 인코딩한 Bearer 토큰을 검증하는 리소스 서버가 자동으로 설정 (JwtDecoder도 생성)
2. Open ID Connect Provider 설정 엔드포인트 또는 인가 서버 메타데이터 엔드포인트를 검색해서 jwt-set-uri 엔드포인트를 찾아 검증 진행
3. 두 가지 검증 전략 설정
   - 리소스 서버는 인가 서버의 jwt-set-uri 엔드포인트로 유효한 공개키를 질의하기 위한 검증 전략 설정
   - Issuer-uri (```http://localhost:8080/realms/oauth2```)에 대한 각 JWT 클레임을 검증할 전략 설정

-----
### 검증 순서
-----
1. 클라이언트가 Authorization Bearer Token-value를 헤더에 담아 요청
2. 리소스 서버는 요청한 Bearer 토큰 사양에 부합하는지 검사
3. 인가 서버에서 JWT 토큰에 서명한 개인키와 매칭하는 공개키를 jwt-set-uri 엔드포인트 요청으로 가져와서 첫 번째 검증을 진행
4. JWT에 있는 exp, nbf, iss 클레임 정보가 기준에 부합하는지 두 번째 검증 진행
5. 검증에 성공하면 Jwt 객체를 생성하고, claims 정보에 있는 scope를 추출해서 시큐리티의 권한에 매핑 (SCOPE_profile, SCOPE_email)
6. Authentication 객체를 생성하고, Jwt 객체를 principal 속성에 저장
7. Authentication를 SecurityContext에 저장하고 인증 완료

-----
### 검증 프로세스 이해
-----
<div align="center">
<img src="https://github.com/user-attachments/assets/9b7b3597-c496-4551-9980-d142dfceb462">
</div>
