-----
### λ€μΉ­ν‚¤ μ•”νΈ (Symmetric-Key Algorithm)
-----
1. μ•”νΈν™” μ•κ³ λ¦¬μ¦μ ν• μΆ…λ¥λ΅, μ•”νΈνΈμ™€ λ³µνΈν™”μ— κ°™μ€ μ•”νΈ ν‚¤λ¥Ό μ“°λ” μ•κ³ λ¦¬μ¦μ„ μλ―Έ
2. λ€μΉ­ ν‚¤ μ•”νΈμ—μ„λ” μ•”νΈν™”λ¥Ό ν•λ” μΈ΅κ³Ό λ³µνΈν™”λ¥Ό ν•λ” μΈ΅μ΄ κ°™μ€ μ•”νΈ ν‚¤λ¥Ό κ³µμ ν•΄μ•Ό ν•¨
3. λΉ„λ€μΉ­ ν‚¤ μ•”νΈμ—μ„ κ³µκ° ν‚¤μ™€ λΉ„λ°€ ν‚¤λ¥Ό λ³„λ„λ΅ κ°€μ§€λ” κ²ƒκ³Ό κµ¬λ³„λλ©°, λ€λ¶€λ¶„ λ€μΉ­ ν‚¤ μ•”νΈλ” λΉ„λ€μΉ­ ν‚¤ μ•”νΈμ™€ λΉ„κµν•μ—¬ κ³„μ‚° μ†λ„κ°€ λΉ λ¥΄λ‹¤λ” μ¥μ  μ΅΄μ¬
4. MAC (Message Authentication Code)
   - π’΅ λ©”μ„Έμ§€ μΈμ¦ μ½”λ“λ” λ°μ΄ν„°κ°€ λ³€μ΅°(μμ •, μ‚­μ , μ‚½μ… λ“±) λμ—λ”μ§€λ¥Ό κ²€μ¦ν•  μ μλ„λ΅ λ°μ΄ν„°μ— λ§λ¶™μ΄λ” μ½”λ“
   - ν•΄μ‹ κ°’μ„ μƒμ„±ν•λ‹¤λ” μ μ—μ„ λ©”μ„Έμ§€ λ‹¤μ΄μ μ¤νΈμ™€ λΉ„μ·ν•μ§€λ§, μ΄κΈ°ν™” μ‹ λΉ„λ°€ν‚¤(Secret Key, λ€μΉ­ν‚¤)λ¥Ό μ”κµ¬ν•λ‹¤λ” μ μ΄ λ‹¤λ¦„
   - λ©”μ„Έμ§€ λ‹¤μ΄μ μ¤νΈλ” λ°›μ€ μΈ΅μ΄ λ„κµ¬λ“  λ¬΄κ²°μ„± κ²€μ‚¬κ°€ κ°€λ¥, MACμ€ μ¤μ§ λ™μΌν• λΉ„λ°€ ν‚¤λ¥Ό κ°€μ§„ μ½μ—μ„λ§ μ „λ‹¬λ°›μ€ λ©”μ„Έμ§€μ λ¬΄κ²°μ„± κ²€μ‚¬ κ°€λ¥
   - μ•”νΈν™” ν•΄μ‹ ν•¨μ(MD5, SHA256 λ“±)λ¥Ό κΈ°λ°μΌλ΅ ν•λ” MACμ΄ μ μ•λ ¤μ§„ HMAC (JWT ν† ν° μ„λ… μ‹ μ‚¬μ©)
   - HMACμ€ λ©”μ„Έμ§€ λ‹¤μ΄μ μ¤νΈ μ•κ³ λ¦¬μ¦κ³Ό κ³µμ λ λΉ„λ°€ ν‚¤μ μ΅°ν•©μΌλ΅ κ°€λ¥ν•λ©°, λ°μ΄ν„°μ λ¬΄κ²°μ„±κ³Ό κΈ°λ°€μ„± λ° μ†΅ / μμ‹ μκ°„ μΈμ¦μ„ λ³΄μ¦ν•κΈ° μ„ν• μ•”νΈν™” κΈ°λ²•

<div align="center">
<img src="https://github.com/user-attachments/assets/15372c90-cc17-431d-ad07-2849e1cac86c">
</div>

-----
### λΉ„λ€μΉ­ν‚¤ μ•”νΈ (Asymmetric-Key Algorithm)
-----
1. μ•”νΈν™” μ•κ³ λ¦¬μ¦μ ν• μΆ…λ¥λ΅, μ•”νΈν™”μ™€ λ³µνΈν™”μ— λ‹¤λ¥Έ μ•”νΈ ν‚¤λ¥Ό μ“°λ” μ•κ³ λ¦¬μ¦μ„ μλ―Έ
2. μ™Έλ¶€μ— μ λ€ λ…Έμ¶λμ–΄μ„λ” μ• λλ” κ°μΈν‚¤(Private Key)μ™€ κ³µκ°μ μΌλ΅ κ°λ°©λμ–΄ μλ” κ³µκ°ν‚¤(Public Key)λ¥Ό μμΌλ΅ μ΄λ£¬ ν•νƒ
   - Aμ κ³µκ°ν‚¤λ¥Ό μ΄μ©ν•μ—¬ μ•”νΈν™”λ λ°μ΄ν„°λ” Aμ κ°μΈν‚¤λ΅λ§ λ³µνΈν™”κ°€ κ°€λ¥
   - Aμ κ°μΈν‚¤λ¥Ό μ΄μ©ν•μ—¬ μ•”νΈν™”λ λ°μ΄ν„°λ” Aμ κ³µκ°ν‚¤λ΅λ§ λ³µνΈν™”κ°€ κ°€λ¥

3. λΉ„λ€μΉ­ν‚¤λ¥Ό μ‚¬μ©ν•μ—¬ λ‘ κ°€μ§€μ μ•”νΈν•™μ  λ¬Έμ  ν•΄κ²° κ°€λ¥
   - λ°μ΄ν„° λ³΄μ• λ¬Έμ  : μ†΅μ‹ μμ κ³µκ°ν‚¤λ΅ μ•”νΈν™” - μ†΅μ‹ μ κ°μΈν‚¤λ΅ λ³µνΈν™”λ¥Ό ν†µν•΄ λ°μ΄ν„°λ¥Ό μ•μ „ν•κ² μ „μ†΅ν•  μ μλ” λ³΄μ• κ΄€μ 
   - μΈμ¦ λ¬Έμ  : μ†΅μ‹ μ κ°μΈν‚¤λ΅ μ•”νΈν™” - μ†΅μ‹ μ κ³µκ°ν‚¤λ΅ λ³µνΈν™”λ¥Ό ν†µν•΄ λ©”μ„Έμ§€ μΈμ¦ (λ¶€μΈ λ°©μ§€)ν•λ” κ²ƒμ΄ λ©μ 
  
4. π’΅ RSA (Ron Rivest, Adi Shamir, Leonar Adleman μ„Έ μ‚¬λμ μ„±μ„ λ”°μ„ RSA λΌκ³  μ΄λ¦„μ΄ λ¶™μ€ μ•”νΈ λ°©μ‹)
   - ν„μ¬ SSL/TLSμ— κ°€μ¥ λ§μ΄ μ‚¬μ©λλ” κ³µκ°ν‚¤ μ•”νΈν™” μ•κ³ λ¦¬μ¦
   - μ „μ„Έκ³„ λ€λ¶€λ¶„ μΈν„°λ„· λ±…ν‚Ή (λ€ν•λ―Όκµ­ ν¬ν•¨)μ΄ RSA-2048 μ•”νΈν™” μ‚¬μ©

<div align="center">
<img src="https://github.com/user-attachments/assets/93b44f0c-daa0-47a5-8b9a-c57cb53b7c10">
</div>

-----
### Key μƒμ„± λ¨λΈ
-----
1. Key
   - JCAμ—μ„ μ§€μ›ν•λ” λ¨λ“  μΆ…λ¥μ ν‚¤μ— λ€ν• μµμƒμ„ μΈν„°νμ΄μ¤
   - Key μΈν„°νμ΄μ¤λ” getAlgorithm(), getEncoded(), getFormat() μ„Έ κ°€μ§€ λ©”μ„λ“ μ κ³µ
<div align="center">
<img src="https://github.com/user-attachments/assets/b1037802-67b7-4344-ab6b-b5a4617c75ab">
</div>

   - getAlgorithm() : ν‚¤ μ•κ³ λ¦¬μ¦μ€ λ³΄ν†µ λ€μΉ­ν‚¤ μ•”νΈ λ°©μ‹(AES, DSA λ“±) λλ” λΉ„λ€μΉ­ν‚¤ μ—°μ‚° μ•κ³ λ¦¬μ¦(RSA)
   - getEncoded() : κΈ°λ³Έ μΈμ½”λ”©λ ν•μ‹μ ν‚¤λ¥Ό λ°ν™
   - getFormat() : μ΄ ν‚¤μ κΈ°λ³Έ μΈμ½”λ”© ν•μ‹μ μ΄λ¦„μ„ λ°ν™ (λΉ„λ€μΉ­ν‚¤ ν‘μ¤€ν•μ‹μΈ X509(Public Key) νΉμ€ PKCS8(Private Key))

2. KeyPair : ν‚¤ μ (κ³µκ°ν‚¤μ™€ κ°μΈν‚¤)μ„ λ³΄κ΄€ν•κ³  μ ‘κ·Όν•  μ μλ” κΈ°λ¥λ§ μ κ³µ
<div align="center">
<img src="https://github.com/user-attachments/assets/c63a07d7-70a8-4e39-b0c8-b4d0da6d86ab">
</div>

3. KeyPairGenerator : κ³µκ°ν‚¤ λ° κ°μΈν‚¤ μμ„ μƒμ„±ν•λ”λ° μ™„μ „ν μƒλ΅μ΄ κ°μ²΄ μƒμ„±
<div align="center">
<img src="https://github.com/user-attachments/assets/46299591-c827-452d-997f-7c06666ad256">
</div>

4. KeyFactory : μ–΄λ–¤ ν‚¤ λ°μ΄ν„° κ°μ²΄λ¥Ό λ‹¤λ¥Έ νƒ€μ…μ ν‚¤ λ°μ΄ν„° κ°μ²΄λ΅ μ „ν™ν•λ”λ° μ‚¬μ©

-----
### Key κ³„μΈµ κµ¬μ΅°
-----
<div align="center">
<img src="https://github.com/user-attachments/assets/14d2b545-a34b-478a-b476-951f40a9cb3a">
</div>

-----
### Cipher
-----
1. μ•”νΈν™” λ° λ³µνΈν™”μ— μ‚¬μ©λλ” μ•”νΈν™” μ•”νΈμ κΈ°λ¥ μ κ³µ
   - μ•”νΈν™”λ” μΌλ° ν…μ¤νΈμ™€ ν‚¤λ¥Ό κ°€μ Έμ™€ μ•”νΈν™”λ λ°μ΄ν„°λ¥Ό μƒμ„±ν•λ” ν”„λ΅μ„Έμ¤
   - λ³µνΈν™”λ” μ•”νΈν™”λ λ°μ΄ν„°μ™€ ν‚¤λ¥Ό κ°€μ Έμ™€μ„ μΌλ° ν…μ¤νΈλ¥Ό μƒμ„±ν•λ” μ—­ κ³Όμ •

2. π’΅ Cipher κ°μ²΄ μΈμ¤ν„΄μ¤ν™” ν•κΈ°
   - μΈμ¤ν„΄μ‹ μƒμ„± μ‹ λ³€ν™μ„ μ§€μ •ν•λ”λ° λ³€ν™μ€ [μ•”νΈν™” μ•κ³ λ¦¬μ¦ / ν”Όλ“λ°± λ¨λ“ / ν¨λ”©] λλ” [μ•”νΈν™” μ•κ³ λ¦¬μ¦]μΌλ΅ μ§€μ •
     + Cipher c1 = Cipher.getInstance("RSA/ECB/OAEPWithSHA1AndMGF1Padding);
     + Cipher c2 = Cipher.getInstance("RSA")
         
3. π’΅ Cipher μ΄κΈ°ν™” ν•κΈ°
   - Cipher κ°μ²΄λ¥Ό μ΄κΈ°ν™”ν•κΈ° μ„ν•΄ Cipher μ‘λ™ λ¨λ“λ¥Ό λ‚νƒ€λ‚΄λ” opmodeμ™€ Key λλ” μ¦λ…μ„(Certificate)λ¥Ό μΈμλ΅ μ „λ‹¬ν•κ³  init() λ©”μ„λ“ μ‹¤ν–‰
   - opmode
     + ENCRYPT_MODE : cipher κ°μ²΄λ¥Ό μ•”νΈν™” λ¨λ“λ΅ μ΄κΈ°ν™”
     + DECRYPT_MODE : cipher κ°μ²΄λ¥Ό λ³µνΈν™” λ¨λ“λ΅ μ΄κΈ°ν™”
   - Cipher cipher = Cipher.getInstance("RSA");
   - cipher.init(Cipher.ENCRYPT_MOD, PrivateKey); (= μ•”νΈν™”ν•  λ•λ” Private Key, λ³µνΈν™”ν•  λ•λ” Public Key μ‚¬μ©μ„ μλ―Έ)

<div align="center">
<img src="https://github.com/user-attachments/assets/57fac1fe-8450-4727-8f91-90ac4802d5df">
</div>

-----
### μ½”λ“
-----
1. MacTest
```java
package io.security.oauth2.springsecurityoauth2;

import javax.crypto.Mac;
import javax.crypto.spec.SecretKeySpec;
import java.io.UnsupportedEncodingException;
import java.security.InvalidKeyException;
import java.security.NoSuchAlgorithmException;
import java.util.Base64;

public class MacTest {

    public static void hmac(String data) throws NoSuchAlgorithmException, InvalidKeyException, UnsupportedEncodingException {

        hmacBase64("secretKey", data, "HmacMD5"); // MD5 
        hmacBase64("secretKey", data, "HmacSHA256"); // SHA256
    }

    public static void hmacBase64(String secret, String data, String algorithms) throws NoSuchAlgorithmException, InvalidKeyException, UnsupportedEncodingException {

        SecretKeySpec secretKey = new SecretKeySpec(secret.getBytes("utf-8"), algorithms); // SecretKeySpecμΌλ΅ Secret Key μƒμ„± (μΈμ : key, algorithm)

        Mac mac = Mac.getInstance(algorithms); // Mac μΈμ¤ν„΄μ¤λ¥Ό κ°€μ Έμ΄

        mac.init(secretKey); // κ³µκ°ν‚¤λ΅ μ΄κΈ°ν™”λ΅ μ‚¬μ©

        byte[] hash = mac.doFinal(data.getBytes()); // ν•΄μ‹λ λ°μ΄ν„° κ°€μ Έμ΄

        String encodedStr = Base64.getEncoder().encodeToString(hash);  // μΈμ½”λ”©
 
        System.out.println(algorithms + ": " + encodedStr); // μ¶λ ¥
    }
}
```

2. RSAGen : μ•”νΈν™”μ™€ λ³µνΈν™”μ— μ‚¬μ©λλ” ν΄λμ¤
```java
package io.security.oauth2.springsecurityoauth2;

import javax.crypto.BadPaddingException;
import javax.crypto.Cipher;
import javax.crypto.IllegalBlockSizeException;
import javax.crypto.NoSuchPaddingException;
import java.io.UnsupportedEncodingException;
import java.security.*;
import java.security.spec.InvalidKeySpecException;
import java.security.spec.PKCS8EncodedKeySpec;
import java.security.spec.X509EncodedKeySpec;
import java.util.Base64;

public class RSAGen {

    public static KeyPair genKeyPair() throws NoSuchAlgorithmException {
        KeyPairGenerator gen = KeyPairGenerator.getInstance("RSA"); // KeyPairGenerator (ν‚¤ μ) κ°€μ Έμ΄ - Public Key, Private Key
        gen.initialize(1024, new SecureRandom()); // ν¬κΈ° 1024 (2048λ„ κ°€λ¥)
        return gen.genKeyPair(); // KeyPair μƒμ„±
    }

    public static String encrypt(String plainText, PublicKey publicKey) throws NoSuchPaddingException, NoSuchAlgorithmException, InvalidKeyException,
            BadPaddingException, IllegalBlockSizeException { // μ•”νΈν™”
        Cipher cipher = Cipher.getInstance("RSA"); // RSAλ΅ Cipher κ°μ²΄ μƒμ„±
        cipher.init(Cipher.ENCRYPT_MODE, publicKey); // μ•”νΈν™” λ¨λ“ μ„¤μ • (κ³µκ°ν‚¤ μ‚¬μ©)

        byte[] bytePlain = cipher.doFinal(plainText.getBytes()); // μ•”νΈν™” μ‹μ‘ (κ³µκ°ν‚¤)
        return Base64.getEncoder().encodeToString(bytePlain); // μΈμ½”λ”©
    }

    public static String decrypt(String encrypted, PrivateKey privateKey) throws NoSuchPaddingException, NoSuchAlgorithmException, InvalidKeyException,
            BadPaddingException, IllegalBlockSizeException, UnsupportedEncodingException { // λ³µνΈν™”
        Cipher cipher = Cipher.getInstance("RSA"); // RSAλ΅ Cipher κ°μ²΄ μƒμ„±
        byte[] byteEncrypted = Base64.getDecoder().decode(encrypted.getBytes());

        cipher.init(Cipher.DECRYPT_MODE, privateKey); // λ³µνΈν™” λ¨λ“ μ„¤μ • (κ°μΈν‚¤ μ‚¬μ©)
        byte[] bytePlain = cipher.doFinal(byteEncrypted); // μ•”νΈν™” μ‹μ‘ (κ°μΈν‚¤)
        return new String(bytePlain, "utf-8"); // μΈμ½”λ”©
    }

    public static PublicKey getPublicKeyFromKeySpec(String base64PublicKey) throws NoSuchAlgorithmException, InvalidKeySpecException { // κ³µκ°ν‚¤ μ¤ν™ μ „ν™ μ‹ μ‚¬μ©
        byte[] decodedBase64PubKey = Base64.getDecoder().decode(base64PublicKey); // ν•΄λ‹Ή κ³µκ°ν‚¤λ¥Ό λ””μ½”λ”©

        return KeyFactory.getInstance("RSA").generatePublic(new X509EncodedKeySpec(decodedBase64PubKey)); // KeyFactoryλ¥Ό ν†µν•΄ X509 ν•μ‹μΌλ΅ μ „ν™
    }

    public static PrivateKey getPrivateKeyFromKeySpec(String base64PrivateKey) throws NoSuchAlgorithmException, InvalidKeySpecException { // κ°μΈν‚¤ μ¤ν™ μ „ν™ μ‹ μ‚¬μ©
        byte[] decodedBase64PrivateKey = Base64.getDecoder().decode(base64PrivateKey); // ν•΄λ‹Ή κ°μΈν‚¤λ¥Ό λ””μ½”λ”©

        return KeyFactory.getInstance("RSA").generatePrivate(new PKCS8EncodedKeySpec(decodedBase64PrivateKey)); // KeyFactoryλ¥Ό ν†µν•΄ PKCS8 ν•μ‹μΌλ΅ μ „ν™
    }
}
```

3. RSATest
```java
package io.security.oauth2.springsecurityoauth2;

import java.security.KeyPair;
import java.security.PrivateKey;
import java.security.PublicKey;
import java.util.Base64;

public class RSATest {

    public static void rsa(String message) throws Exception {

        KeyPair keyPair = RSAGen.genKeyPair(); // KeyPairλ¥Ό κ°€μ Έμ΄ 
        PublicKey publicKey = keyPair.getPublic(); // RSAPublicKeyImpl κµ¬ν„μ²΄ μ‚¬μ©
        PrivateKey privateKey = keyPair.getPrivate(); // RSAPrivateKeyImpl κµ¬ν„μ²΄ μ‚¬μ©

        String encrypted = RSAGen.encrypt(message, publicKey); // μ›λ³Έ μ•”νΈν™”
        String decrypted = RSAGen.decrypt(encrypted, privateKey); // μ•”νΈν™”λ¥Ό λ³µνΈν™”

        System.out.println("message : " + message);
        System.out.println("decrypted : " + decrypted);

        // ν‚¤ μ¤ν™ μ „ν™ν•κΈ°
        byte[] bytePublicKey = publicKey.getEncoded(); // μΈμ½”λ”©λ κ³µκ°ν‚¤ κ°’ κ°€μ Έμ΄
        String base64PublicKey = Base64.getEncoder().encodeToString(bytePublicKey); // Base64λ΅ μΈμ½”λ”©λ κ°’μ„ λ¬Έμμ—΄λ΅ μ „λ‹¬
        byte[] bytePrivateKey = privateKey.getEncoded(); // μΈμ½”λ”©λ κ°μΈν‚¤ κ°’ κ°€μ Έμ΄
        String base64PrivateKey = Base64.getEncoder().encodeToString(bytePrivateKey); // Base64λ΅ μΈμ½”λ”©λ κ°’μ„ λ¬Έμμ—΄λ΅ μ „λ‹¬

        // ν‚¤ μ¤ν™ μ „ν™ν•κΈ°

        // X.509 ν‘μ¤€ν•μ‹
        PublicKey X509PublicKey = RSAGen.getPublicKeyFromKeySpec(base64PublicKey); // Public Keyλ¥Ό X509 ν•μ‹μΌλ΅ μ „ν™
        String encrypted2 = RSAGen.encrypt(message, X509PublicKey); // λ³€κ²½ν•΄μ„ μ•”νΈν™”
        String decrypted2 = RSAGen.decrypt(encrypted2, privateKey);

        System.out.println("message : " + message);
        System.out.println("decrypted2 : " + decrypted2);


        // PKCS8 ν‘μ¤€ν•μ‹
        PrivateKey PKCS8PrivateKey = RSAGen.getPrivateKeyFromKeySpec(base64PrivateKey); // Private Keyλ¥Ό PKCS8 ν•μ‹μΌλ΅ μ „ν™
        String decrypted3 = RSAGen.decrypt(encrypted2, PKCS8PrivateKey); // λ³€κ²½ν•΄μ„ λ³µνΈν™”

        System.out.println("message : " + message);
        System.out.println("decrypted3 : " + decrypted3);
    }
}
```

4. SpringSecurityOauth2Application
```java
package io.security.oauth2.springsecurityoauth2;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class SpringSecurityOauth2Application {
    public static void main(String[] args) throws Exception {
        MacTest.hmac("Spring Security");
        RSATest.rsa("Spring Security");
        // SpringApplication.run(SpringSecurityOauth2Application.class, args);
    }
}
```
