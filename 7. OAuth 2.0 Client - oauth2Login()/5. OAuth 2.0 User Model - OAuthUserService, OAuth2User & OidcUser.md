-----
### OAuthUserService 개요
-----
1. 액세스 토큰을 사용해서 UserInfo 엔드포인트 요청으로 최종 사용자의 (Resource Owner) 속성을 가져오며, OAuth2User 타입의 객체 Return
2. 구현체로 DefaultOAuth2Uservice와 OdicUserService 제공
3. DefaultOAuth2UserService
   - 표준 OAuth 2.0 Provider를 지원하는 OAuth2UserService 구현체
   - OAuth2UserRequest에 Access Token을 담아 인가 서버와 통신 후 사용자의 속성을 가져옴
   - 최종 OAuth2User 타입 객체 반환

4. OidcUserService
   - OpenID Connect 1.0 Provider를 지원하는 OAuth2UserService 구현체
   - OidcUserRequest에 있는 ID Token을 통해 인증 처리를 하며, 필요시 DefaultOAuth2UserService를 사용해서 UserInfo 엔드포인트의 사용자 속성 요청
   - 최종 OidcUser 타입 객체 반환
  
-----
### 흐름
-----
<div align="center">
<img src="https://github.com/user-attachments/assets/e365a604-ea69-4f4d-a4a2-2f00fc8df2b4">
</div>

-----
### 구조
-----
<div align="center">
<img src="https://github.com/user-attachments/assets/0d5d2ff1-5e7e-41b6-aa18-f5b343637bf9">
</div>

1. DefaultOAuth2UserService : OAuth2User 타입 객체 반환
2. OidcUserService : OidcUser 타입 객체 반환
3. OidcUserRequest의 승인된 토큰 (Access Token)에 포함되어 있는 scope 값이 accessibleScopes의 값들 중 하나 이상 포함되어 있을 경우 UserInfo 엔드 포인트를 요청

-----
### OAuth2User & OidcUser 개요
-----
1. 💡 시큐리티는 UserAttributes 및 ID Token Claims (= 사용자 속성)을 집계 & 구성하여 OAuth2User와 OidcUser 타입 클래스를 제공
2. OAuth2User
   - OAuth 2.0 Provider에 연결된 사용자 주체를 나타냄
   - 최종 사용자의 인증에 대한 정보인 Attrributes를 포함하고 있으며, first name, middle name, last name, phone number, address 등으로 구성
   - 기본 구현체는 Default2OAuth2User이며, 인증 이후 Authentication의 principal 속성에 저장

3. OidcUser
   - OAuth2User를 상속한 인터페이스이며, OIDC Provider에 연결된 사용자 주체를 나타냄
   - 최종 사용자 인증에 대한 정보인 Clamis를 포함하고 있으며, OidcIdToken 및 OidcUserInfo에서 집계 및 구성
   - 기본 구현체는 DefaultOidcUser이며, DefaultOAuth2User를 상속하고 있으며, 인증 이후 Authentication의 principal 속성에 저장

-----
### 흐름
-----
<div align="center">
<img src="https://github.com/user-attachments/assets/e92d5fa4-c6cf-467c-9a62-b4b14ba300a0">
</div>

-----
### 구조
-----
<div align="center">
<img src="https://github.com/user-attachments/assets/1e494cce-ed9f-4716-aafc-293378dac6c8">
</div>

1. OAuth 2.0 로그인을 통해 인증받은 최종 사용자의 Principal : OAuth2User 혹은 OidcUser 타입 객체 저장
2. 권한 부여 요청시, scope 파라미터에 openid를 포함했다면 OidcUser 타입 객체가 생성되며, OidcUser는 OidcUserinfo와 idToken을 가지고 있으며, 최종 사용자에 대한 Claims 정보를 포함
3. OAuth2UserAuthority는 인가 서버로부터 수신한 scope 정보를 집계해서 권한 정보 구성
4. OidcUser 객체를 생성할 때, ID 토큰이 필요한데, 이 때 JSON 웹 토큰(JWT)으로 된 ID 토큰은 JSON Web Signature(JWS)로 서명되어 있으므로, 반드시 정해진 알고리즘에 의한 검증이 성공하면 OidcUser 객체를 생성해야 함
